import M1;
import M2;
import M3;
import M4;

protocol ChoiceMergeNested(role A) {
	A introduces B, C, D;

	choice at A {
		M1 from A to B;
	    M4 from B to C;
		choice at C {
		    M1 from C to D;
	        M1 from D to A;
	        M3 from A to B;
		} or {
		    M2 from C to D;
	        M2 from D to A;
	        M4 from A to B;
		}
	} or {
		M2 from A to B;
	    M3 from B to A;
	    M3 from B to C;
	    M3 from B to D;
	}
}
